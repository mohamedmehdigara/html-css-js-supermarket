<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshCart Supermarket</title>
    <!-- Use Tailwind CSS for easy and responsive styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark {
            background-color: #1a202c;
            color: #e2e8f0;
        }

        .dark .bg-white {
            background-color: #2d3748;
        }

        .dark .text-gray-800 {
            color: #e2e8f0;
        }

        .dark .text-gray-600, .dark .text-gray-500 {
            color: #a0aec0;
        }

        .dark .text-gray-400 {
            color: #718096;
        }

        .dark .bg-gray-100 {
            background-color: #4a5568;
        }

        .dark .border-gray-300 {
            border-color: #4a5568;
        }

        .dark .shadow-md {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
        }

        .dark .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .dark .shadow-xl {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Custom scrollbar for better aesthetics */
        .cart-items::-webkit-scrollbar, .list-items::-webkit-scrollbar, .recently-viewed::-webkit-scrollbar, .compare-table-container::-webkit-scrollbar, .recipes::-webkit-scrollbar {
            width: 8px;
        }

        .cart-items::-webkit-scrollbar-track, .list-items::-webkit-scrollbar-track, .recently-viewed::-webkit-scrollbar-track, .compare-table-container::-webkit-scrollbar-track, .recipes::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 10px;
        }

        .dark .cart-items::-webkit-scrollbar-track, .dark .list-items::-webkit-scrollbar-track, .dark .recently-viewed::-webkit-scrollbar-track, .dark .compare-table-container::-webkit-scrollbar-track, .dark .recipes::-webkit-scrollbar-track {
             background: #4a5568;
        }

        .cart-items::-webkit-scrollbar-thumb, .list-items::-webkit-scrollbar-thumb, .recently-viewed::-webkit-scrollbar-thumb, .compare-table-container::-webkit-scrollbar-thumb, .recipes::-webkit-scrollbar-thumb {
            background-color: #9ca3af;
            border-radius: 10px;
            border: 2px solid #e5e7eb;
        }

        .dark .cart-items::-webkit-scrollbar-thumb, .dark .list-items::-webkit-scrollbar-thumb, .dark .recently-viewed::-webkit-scrollbar-thumb, .dark .compare-table-container::-webkit-scrollbar-thumb, .dark .recipes::-webkit-scrollbar-thumb {
            background-color: #718096;
            border: 2px solid #4a5568;
        }

        /* Modal animation classes */
        .modal-enter {
            opacity: 0;
            transform: translateY(-20px);
        }

        .modal-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .modal-exit {
            opacity: 1;
            transform: translateY(0);
        }

        .modal-exit-active {
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        /* Star rating styles */
        .star-rating {
            display: flex;
            align-items: center;
        }

        .star-rating svg {
            color: #ffc107; /* A bright yellow for stars */
            width: 1rem;
            height: 1rem;
            margin-right: 2px;
        }
        
        .compare-table {
            border-collapse: collapse;
            width: 100%;
        }
        .compare-table th, .compare-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            text-align: left;
            vertical-align: top;
        }
        .dark .compare-table th, .dark .compare-table td {
            border-bottom-color: #4a5568;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Did You Know? Fixed Banner -->
    <div class="fixed top-0 left-0 w-full z-40 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 py-2 px-4 text-center">
        <span id="triviaBanner" class="font-medium">Did you know? Bananas are technically berries!</span>
    </div>

    <!-- Header Section -->
    <header class="bg-white shadow-md sticky top-10 z-50">
        <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <a href="#" class="text-2xl font-bold text-green-600 flex items-center mb-4 md:mb-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5H12m0 0l-1.6 8M7 13l-2.4 8m10.4-8l2.4 8M16 13l-2.4 8m-2.4-8h-2.4m2.4 0a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                FreshCart
            </a>

            <!-- Navigation Links -->
            <nav class="hidden md:flex flex-grow justify-center space-x-6 text-lg font-medium">
                <a href="#products" class="text-gray-600 hover:text-green-600 transition-colors duration-300">Products</a>
                <a href="#" class="text-gray-600 hover:text-green-600 transition-colors duration-300">Weekly Deals</a>
                <a href="#about-us" class="text-gray-600 hover:text-green-600 transition-colors duration-300">About Us</a>
                <a href="#contact" class="text-gray-600 hover:text-green-600 transition-colors duration-300">Contact</a>
            </nav>

            <!-- Search and Cart Icons -->
            <div class="flex items-center space-x-4">
                <div class="relative w-full md:w-auto">
                    <input type="text" id="searchInput" placeholder="Search products..." class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 transition-all duration-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
                <!-- Shopping List Button -->
                <button id="shoppingListButton" class="relative bg-blue-500 text-white p-3 rounded-full hover:bg-blue-600 transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M15 13h.01M12 13h.01" />
                    </svg>
                </button>
                <!-- Compare Button -->
                <button id="compareButton" class="relative bg-purple-500 text-white p-3 rounded-full hover:bg-purple-600 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                    </svg>
                </button>
                <!-- Recipe Ideas Button -->
                <button id="recipeButton" class="relative bg-yellow-500 text-white p-3 rounded-full hover:bg-yellow-600 transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 14l6-6m-6 6l6 6m-3-12h.01M3 6h18M3 18h18M6 3v18M18 3v18"/>
                    </svg>
                </button>
                <!-- Dark Mode Toggle Button -->
                <button id="darkModeToggle" class="relative bg-gray-300 text-gray-800 p-3 rounded-full hover:bg-gray-400 transition-colors duration-300 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                </button>
                <button id="cartButton" class="relative bg-green-500 text-white p-3 rounded-full hover:bg-green-600 transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5H12m0 0l-1.6 8M7 13l-2.4 8m10.4-8l2.4 8M16 13l-2.4 8m-2.4-8h-2.4m2.4 0a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <span id="cartCount" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-green-100 text-center py-20 px-4 rounded-b-3xl shadow-lg dark:bg-green-900 mt-10">
        <h1 class="text-4xl md:text-6xl font-extrabold text-green-800 mb-4 dark:text-green-200">Freshness Delivered to Your Doorstep</h1>
        <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto mb-8 dark:text-gray-300">Discover a wide range of fresh produce, quality groceries, and daily essentials, all at your fingertips.</p>
        <button class="bg-green-600 text-white font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-green-700 transition-colors duration-300 transform hover:scale-105">Shop Now</button>
    </section>

    <!-- Product Grid Section -->
    <main id="products" class="container mx-auto px-4 py-12">
        <h2 class="text-3xl font-bold text-center mb-6 text-green-700 dark:text-green-300">Our Products</h2>

        <!-- Filters and Sorting -->
        <div class="flex flex-col md:flex-row justify-center items-center mb-8 space-y-4 md:space-y-0 md:space-x-4">
            <!-- Category Filter -->
            <select id="categoryFilter" class="w-full md:w-auto p-2 rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200">
                <option value="all">All Categories</option>
                <option value="fruits">Fruits</option>
                <option value="vegetables">Vegetables</option>
                <option value="dairy">Dairy</option>
                <option value="bakery">Bakery</option>
                <option value="meat">Meat</option>
                <option value="seafood">Seafood</option>
                <option value="pantry">Pantry</option>
            </select>
            <!-- Sorting -->
            <select id="sortOrder" class="w-full md:w-auto p-2 rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200">
                <option value="default">Default Sort</option>
                <option value="price-asc">Price: Low to High</option>
                <option value="price-desc">Price: High to Low</option>
                <option value="name-asc">Name: A-Z</option>
                <option value="name-desc">Name: Z-A</option>
                <option value="rating-desc">Rating: High to Low</option>
            </select>
            <!-- Price Range Filter -->
            <div class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2 w-full md:w-auto">
                <input type="number" id="minPrice" placeholder="Min Price" class="w-full sm:w-28 p-2 rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200" min="0">
                <input type="number" id="maxPrice" placeholder="Max Price" class="w-full sm:w-28 p-2 rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200" min="0">
                <button id="filterButton" class="w-full sm:w-auto bg-green-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-600 transition-colors duration-300">Filter</button>
            </div>
            <!-- Dietary Filters -->
            <div class="flex flex-wrap justify-center space-x-2 text-sm md:text-base">
                <label class="flex items-center space-x-2">
                    <input type="checkbox" id="organicFilter" value="organic" class="form-checkbox h-5 w-5 text-green-500 rounded focus:ring-green-500">
                    <span class="text-gray-700 dark:text-gray-300">Organic</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" id="veganFilter" value="vegan" class="form-checkbox h-5 w-5 text-green-500 rounded focus:ring-green-500">
                    <span class="text-gray-700 dark:text-gray-300">Vegan</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" id="glutenFreeFilter" value="gluten-free" class="form-checkbox h-5 w-5 text-green-500 rounded focus:ring-green-500">
                    <span class="text-gray-700 dark:text-gray-300">Gluten-Free</span>
                </label>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8" id="productGrid">
            <!-- Product Cards will be injected here by JavaScript -->
        </div>
    </main>

    <!-- Recently Viewed Section -->
    <section class="container mx-auto px-4 py-8">
        <h2 class="text-3xl font-bold text-center mb-6 text-green-700 dark:text-green-300">Recently Viewed</h2>
        <div id="recentlyViewedContainer" class="flex overflow-x-auto space-x-4 pb-4 px-2 recently-viewed">
            <!-- Recently viewed products will be injected here by JavaScript -->
        </div>
    </section>

    <!-- Simple "Add to Cart" Message Box -->
    <div id="messageBox" class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-600 text-white p-4 rounded-lg shadow-xl hidden transition-all duration-300 ease-in-out opacity-0 z-50">
        <p id="messageText"></p>
    </div>

    <!-- Shopping Cart Modal -->
    <div id="cartModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-[100] hidden flex items-center justify-center modal-enter">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md mx-4 transition-all duration-300">
            <div class="flex justify-between items-center border-b pb-3 mb-4 border-gray-200 dark:border-gray-700">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200">Your Cart</h3>
                <button id="closeCartModal" class="text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <div id="cartItems" class="space-y-4 max-h-80 overflow-y-auto pr-2 cart-items">
                <!-- Cart items will be rendered here -->
            </div>

            <div class="border-t pt-4 mt-4 flex justify-between items-center border-gray-200 dark:border-gray-700">
                <span class="text-xl font-bold">Total:</span>
                <span id="cartTotal" class="text-xl font-bold text-green-600">$0.00</span>
            </div>
            <button id="checkoutButtonInCart" class="w-full bg-green-600 text-white font-semibold py-3 mt-4 rounded-full hover:bg-green-700 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                Checkout
            </button>
        </div>
    </div>

    <!-- Shopping List Modal -->
    <div id="listModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-[100] hidden flex items-center justify-center modal-enter">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md mx-4 transition-all duration-300">
            <div class="flex justify-between items-center border-b pb-3 mb-4 border-gray-200 dark:border-gray-700">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200">Your Shopping List</h3>
                <button id="closeListModal" class="text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="listItems" class="space-y-4 max-h-80 overflow-y-auto pr-2 list-items">
                <!-- List items will be rendered here -->
            </div>
            <div class="mt-4 flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-2">
                <input type="text" id="listItemInput" placeholder="Add a new item..." class="flex-grow p-2 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200">
                <button id="addListItemButton" class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-full hover:bg-blue-600 transition-colors duration-300">Add</button>
            </div>
            <button id="addAllToListToCart" class="w-full bg-purple-500 text-white font-semibold py-3 mt-4 rounded-full hover:bg-purple-600 transition-colors duration-300">
                Add All to Cart
            </button>
        </div>
    </div>
    
    <!-- Product Quick View Modal -->
    <div id="quickViewModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-[110] hidden flex items-center justify-center modal-enter">
        <div id="quickViewContent" class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-2xl mx-4 transition-all duration-300">
            <!-- Content will be injected here -->
        </div>
    </div>
    
    <!-- Product Comparison Modal -->
    <div id="compareModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-[120] hidden flex items-center justify-center modal-enter">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-4xl mx-4 transition-all duration-300">
            <div class="flex justify-between items-center border-b pb-3 mb-4 border-gray-200 dark:border-gray-700">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200">Product Comparison</h3>
                <button id="closeCompareModal" class="text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="compareContent" class="compare-table-container overflow-x-auto max-h-[80vh]">
                <!-- Comparison table will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Recipe Modal -->
    <div id="recipeModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-[130] hidden flex items-center justify-center modal-enter">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md mx-4 transition-all duration-300">
            <div class="flex justify-between items-center border-b pb-3 mb-4 border-gray-200 dark:border-gray-700">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200">Recipe Ideas</h3>
                <button id="closeRecipeModal" class="text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="recipeContent" class="space-y-4 max-h-[70vh] overflow-y-auto pr-2 recipes">
                <!-- Recipes will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Footer Section -->
    <footer id="about-us" class="bg-gray-900 text-white py-8 mt-12 rounded-t-3xl shadow-lg dark:bg-gray-900">
        <div class="container mx-auto px-4 text-center md:text-left grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
                <h3 class="text-xl font-bold mb-4 text-green-500">FreshCart</h3>
                <p class="text-gray-400">Quality groceries, delivered with care. Your one-stop shop for all essentials.</p>
            </div>
            <div>
                <h3 class="text-xl font-bold mb-4">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="#" class="text-gray-400 hover:text-green-500 transition-colors duration-300">Products</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-green-500 transition-colors duration-300">Specials</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-green-500 transition-colors duration-300">Our Story</a></li>
                </ul>
            </div>
            <div id="contact">
                <h3 class="text-xl font-bold mb-4">Contact Us</h3>
                <p class="text-gray-400">123 Main Street, Anytown, USA</p>
                <p class="text-gray-400">info@freshcart.com</p>
                <div class="flex justify-center md:justify-start space-x-4 mt-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07c3.252.148 4.613 1.626 4.76 4.854.054 1.268.067 1.649.067 4.853 0 3.205-.013 3.585-.067 4.854-.147 3.228-1.508 4.608-4.76 4.756-1.267.058-1.648.07-4.85.07zm0-2.163c-3.259 0-3.66.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.058 1.288-.072 1.689-.072 4.948 0 3.259.014 3.66.072 4.947.2 4.358 2.618 6.78 6.98 6.98 1.288.058 1.689.072 4.948.072 3.259 0 3.66-.014 4.947-.072 4.358-.2 6.78-2.618 6.98-6.98.058-1.288.072-1.689.072-4.948 0-3.259-.014-3.66-.072-4.947-.2-4.358-2.618-6.78-6.98-6.98-1.288-.058-1.689-.072-4.948-.072zM12 6.865c-2.822 0-5.135 2.313-5.135 5.135s2.313 5.135 5.135 5.135 5.135-2.313 5.135-5.135-2.313-5.135-5.135-5.135zm0 8.865c-2.04 0-3.7-1.66-3.7-3.7s1.66-3.7 3.7-3.7 3.7 1.66 3.7 3.7-1.66 3.7-3.7 3.7z"/></svg></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M22.25 4.364c-.793.353-1.644.59-2.525.694.912-.547 1.614-1.412 1.944-2.443-.858.508-1.809.878-2.816 1.078-2.028-2.16-5.46-2.68-7.79-.172-2.14 2.39-1.92 6.04-.158 8.44-4.66-.25-8.794-2.47-11.554-5.83-.563.97-1.07 2.064-1.07 3.256 0 2.254 1.144 4.258 2.872 5.417-1.12-.036-2.17-.34-3.09-1.07v.08c0 3.31 2.36 6.068 5.48 6.71-.58.158-1.2.23-1.84.23-.454 0-.89-.044-1.32-.127.872 2.71 3.39 4.68 6.38 4.74-2.348 1.84-5.286 2.92-8.49 2.92-.55 0-1.09-.033-1.63-.09 3.03 1.94 6.63 3.076 10.5 3.076 12.59 0 19.45-10.43 19.45-19.45 0-.498-.01-1-.03-1.49.82-.59 1.54-1.32 2.1-2.15z"/></svg></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M9.455 1.493c-2.473 0-3.358.007-4.544.06-2.385.1-3.64 1.258-3.737 3.643-.053 1.186-.06 2.07-.06 4.544v3.834c0 2.473.007 3.358.06 4.544.097 2.385 1.352 3.543 3.737 3.643 1.186.053 2.07.06 4.544.06h3.834c2.473 0 3.358-.007 4.544-.06 2.385-.097 3.64-1.258 3.737-3.643.053-1.186.06-2.07.06-4.544v-3.834c0-2.473-.007-3.358-.06-4.544-.097-2.385-1.352-3.543-3.737-3.643-1.186-.053-2.07-.06-4.544-.06h-3.834zm1.905 13.921c-2.583 0-4.685-2.1-4.685-4.685s2.102-4.685 4.685-4.685 4.685 2.1 4.685 4.685-2.102 4.685-4.685 4.685zm.14-7.461c-1.528 0-2.776 1.248-2.776 2.776s1.248 2.776 2.776 2.776 2.776-1.248 2.776-2.776-1.248-2.776-2.776-2.776zM17.518 5.768c0-.563.455-1.018 1.018-1.018s1.018.455 1.018 1.018-.455 1.018-1.018 1.018-1.018-.455-1.018-1.018z"/></svg></a>
                </div>
            </div>
        </div>
        <p class="text-center text-gray-500 text-sm mt-8">&copy; 2024 FreshCart. All rights reserved.</p>
    </footer>

    <!-- JavaScript for dynamic product loading, cart, and new functionalities -->
    <script>
        // Array of products to display
        const products = [
            { id: 1, name: "Fresh Apples", price: 2.99, image: "https://placehold.co/400x300/e5f7ed/1b5e20?text=Apples", category: "fruits", description: "Crisp and juicy apples, perfect for snacking or baking.", rating: 4.5, organic: true, vegan: true, glutenFree: true },
            { id: 2, name: "Organic Bananas", price: 1.50, image: "https://placehold.co/400x300/fff3e0/e65100?text=Bananas", category: "fruits", description: "Naturally sweet and potassium-rich, a great source of energy.", rating: 4.0, organic: true, vegan: true, glutenFree: true },
            { id: 3, name: "Avocado", price: 1.85, image: "https://placehold.co/400x300/e8f5e9/2e7d32?text=Avocado", category: "vegetables", description: "Creamy and delicious, perfect for toast, salads, and more.", rating: 5.0, organic: false, vegan: true, glutenFree: true },
            { id: 4, name: "Broccoli", price: 3.20, image: "https://placehold.co/400x300/e1f5fe/01579b?text=Broccoli", category: "vegetables", description: "A nutrient-packed vegetable that's great steamed, roasted, or raw.", rating: 4.5, organic: true, vegan: true, glutenFree: true },
            { id: 5, name: "Milk (1L)", price: 4.50, image: "https://placehold.co/400x300/fafafa/000000?text=Milk", category: "dairy", description: "Fresh, pasteurized milk from local farms.", rating: 4.8, organic: false, vegan: false, glutenFree: true },
            { id: 6, name: "Whole Wheat Bread", price: 3.75, image: "https://placehold.co/400x300/fbe9e7/bf360c?text=Bread", category: "bakery", description: "Hearty and healthy, baked fresh daily.", rating: 3.5, organic: false, vegan: true, glutenFree: false },
            { id: 7, name: "Cheddar Cheese", price: 5.99, image: "https://placehold.co/400x300/fff8e1/ff6f00?text=Cheese", category: "dairy", description: "Sharp and delicious cheddar, aged for a rich flavor.", rating: 4.2, organic: false, vegan: false, glutenFree: true },
            { id: 8, name: "Tomato", price: 0.75, image: "https://placehold.co/400x300/ffebee/d32f2f?text=Tomato", category: "vegetables", description: "Juicy, ripe tomatoes, perfect for salads and sandwiches.", rating: 4.7, organic: true, vegan: true, glutenFree: true },
            { id: 9, name: "Chicken Breast", price: 8.99, image: "https://placehold.co/400x300/fafafa/000000?text=Chicken", category: "meat", description: "Lean and versatile chicken breast, a kitchen staple.", rating: 4.6, organic: false, vegan: false, glutenFree: true },
            { id: 10, name: "Salmon Fillet", price: 12.50, image: "https://placehold.co/400x300/e3f2fd/1565c0?text=Salmon", category: "seafood", description: "Rich and flavorful salmon fillet, responsibly sourced.", rating: 4.9, organic: false, vegan: false, glutenFree: true },
            { id: 11, name: "Organic Eggs", price: 3.99, image: "https://placehold.co/400x300/fffde7/ffb300?text=Eggs", category: "dairy", description: "Free-range organic eggs, full of flavor.", rating: 4.8, organic: true, vegan: false, glutenFree: true },
            { id: 12, name: "Pasta", price: 2.10, image: "https://placehold.co/400x300/f3e5f5/6a1b9a?text=Pasta", category: "pantry", description: "Classic spaghetti pasta, a staple for any meal.", rating: 4.1, organic: false, vegan: true, glutenFree: false },
        ];

        // Hard-coded recipes with ingredients as product names
        const recipes = [
            {
                name: "Simple Pasta with Tomato Sauce",
                description: "A quick and delicious classic that’s perfect for a weeknight meal.",
                requiredIngredients: ["Pasta", "Tomato"],
                optionalIngredients: ["Cheddar Cheese"]
            },
            {
                name: "Chicken and Broccoli Stir-fry",
                description: "A healthy and hearty stir-fry that comes together in minutes.",
                requiredIngredients: ["Chicken Breast", "Broccoli"],
                optionalIngredients: ["Avocado"]
            },
            {
                name: "Tomato and Avocado Toast",
                description: "A fresh and simple toast recipe, perfect for a light breakfast or snack.",
                requiredIngredients: ["Whole Wheat Bread", "Avocado", "Tomato"]
            },
            {
                name: "Salmon and Roasted Broccoli",
                description: "A light and nutritious dinner featuring flavorful salmon and crispy roasted broccoli.",
                requiredIngredients: ["Salmon Fillet", "Broccoli"]
            },
            {
                name: "Fruit Salad",
                description: "A refreshing mix of fresh fruits, perfect for a healthy dessert or snack.",
                requiredIngredients: ["Fresh Apples", "Organic Bananas"]
            }
        ];
        
        // Hard-coded food trivia facts
        const foodFacts = [
            "Did you know? Bananas are technically berries!",
            "Did you know? A strawberry is not a berry!",
            "Did you know? The most expensive spice is saffron.",
            "Did you know? Honey is the only food that doesn’t spoil.",
            "Did you know? Carrots were originally purple.",
            "Did you know? Tomatoes are fruits, not vegetables."
        ];

        let cart = [];
        let shoppingList = JSON.parse(localStorage.getItem('shoppingList')) || [];
        let recentlyViewed = JSON.parse(localStorage.getItem('recentlyViewed')) || [];
        let comparisonList = [];

        const productGrid = document.getElementById('productGrid');
        const cartCountElement = document.getElementById('cartCount');
        const searchInput = document.getElementById('searchInput');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');
        const cartButton = document.getElementById('cartButton');
        const cartModal = document.getElementById('cartModal');
        const closeCartModal = document.getElementById('closeCartModal');
        const cartItemsContainer = document.getElementById('cartItems');
        const cartTotalElement = document.getElementById('cartTotal');
        const categoryFilter = document.getElementById('categoryFilter');
        const sortOrder = document.getElementById('sortOrder');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const shoppingListButton = document.getElementById('shoppingListButton');
        const listModal = document.getElementById('listModal');
        const closeListModal = document.getElementById('closeListModal');
        const listItemsContainer = document.getElementById('listItems');
        const listItemInput = document.getElementById('listItemInput');
        const addListItemButton = document.getElementById('addListItemButton');
        const quickViewModal = document.getElementById('quickViewModal');
        const quickViewContent = document.getElementById('quickViewContent');
        const recentlyViewedContainer = document.getElementById('recentlyViewedContainer');
        const checkoutButtonInCart = document.getElementById('checkoutButtonInCart');
        const minPriceInput = document.getElementById('minPrice');
        const maxPriceInput = document.getElementById('maxPrice');
        const filterButton = document.getElementById('filterButton');
        const compareButton = document.getElementById('compareButton');
        const compareModal = document.getElementById('compareModal');
        const closeCompareModal = document.getElementById('closeCompareModal');
        const compareContent = document.getElementById('compareContent');
        const recipeButton = document.getElementById('recipeButton');
        const recipeModal = document.getElementById('recipeModal');
        const closeRecipeModal = document.getElementById('closeRecipeModal');
        const recipeContent = document.getElementById('recipeContent');
        const addAllToListToCartButton = document.getElementById('addAllToListToCart');
        const organicFilter = document.getElementById('organicFilter');
        const veganFilter = document.getElementById('veganFilter');
        const glutenFreeFilter = document.getElementById('glutenFreeFilter');
        const triviaBanner = document.getElementById('triviaBanner');


        // Function to generate star rating SVG
        function getStars(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            let starsHtml = '';
            for (let i = 0; i < fullStars; i++) {
                starsHtml += `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 fill-current text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.243.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.543 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.788.57-1.843-.197-1.543-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z" /></svg>`;
            }
            if (halfStar) {
                starsHtml += `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 fill-current text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a1 1 0 01.993.883L11.05 4.9l3.292 1.07a1 1 0 01.69.95L15.93 10l-2.034 2.8a1 1 0 01-1.118.364l-3.292-1.07a1 1 0 01-.95-.69L9 11.05V2.883A1 1 0 0110 2zM9 11.05L5.708 9.98a1 1 0 00-.95-.69L2.98 8.72a1 1 0 00-.588 1.81l2.8 2.034a1 1 0 00.364 1.118l-1.07 3.292a1 1 0 001.543 1.118l2.8-2.034a1 1 0 001.175 0L10 16.586V11.05z" /></svg>`;
            }
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                starsHtml += `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 fill-current text-gray-300" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.243.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.543 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.788.57-1.843-.197-1.543-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z" /></svg>`;
            }
            return `<div class="star-rating">${starsHtml}</div>`;
        }
        
        // Function to render products with filters and sorting
        function renderProducts() {
            let filteredProducts = products.slice(); // Create a copy
            const searchTerm = searchInput.value.toLowerCase();
            const selectedCategory = categoryFilter.value;
            const selectedSort = sortOrder.value;
            const minPrice = parseFloat(minPriceInput.value);
            const maxPrice = parseFloat(maxPriceInput.value);
            const isOrganic = organicFilter.checked;
            const isVegan = veganFilter.checked;
            const isGlutenFree = glutenFreeFilter.checked;

            // 1. Filter
            if (searchTerm) {
                filteredProducts = filteredProducts.filter(product =>
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm)
                );
            }
            if (selectedCategory !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === selectedCategory);
            }
            if (!isNaN(minPrice)) {
                filteredProducts = filteredProducts.filter(product => product.price >= minPrice);
            }
            if (!isNaN(maxPrice)) {
                filteredProducts = filteredProducts.filter(product => product.price <= maxPrice);
            }
            if (isOrganic) {
                filteredProducts = filteredProducts.filter(product => product.organic);
            }
            if (isVegan) {
                filteredProducts = filteredProducts.filter(product => product.vegan);
            }
            if (isGlutenFree) {
                filteredProducts = filteredProducts.filter(product => product.glutenFree);
            }


            // 2. Sort
            if (selectedSort === 'price-asc') {
                filteredProducts.sort((a, b) => a.price - b.price);
            } else if (selectedSort === 'price-desc') {
                filteredProducts.sort((a, b) => b.price - a.price);
            } else if (selectedSort === 'name-asc') {
                filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
            } else if (selectedSort === 'name-desc') {
                filteredProducts.sort((a, b) => b.name.localeCompare(a.name));
            } else if (selectedSort === 'rating-desc') {
                filteredProducts.sort((a, b) => b.rating - a.rating);
            }

            productGrid.innerHTML = ''; // Clear the grid
            filteredProducts.forEach(product => {
                const isCompared = comparisonList.includes(product.id);
                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-xl dark:bg-gray-700 relative';
                
                const starsHtml = getStars(product.rating);
                
                productCard.innerHTML = `
                    <div class="absolute top-3 right-3 z-10 flex items-center bg-white dark:bg-gray-800 p-2 rounded-full shadow-md">
                        <label for="compare-${product.id}" class="text-sm font-semibold text-gray-700 dark:text-gray-300 mr-2">Compare</label>
                        <input type="checkbox" id="compare-${product.id}" onchange="toggleCompare(${product.id})" ${isCompared ? 'checked' : ''} class="form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500">
                    </div>
                    <div onclick="showQuickView(${product.id})" class="cursor-pointer">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover object-center">
                        <div class="p-5">
                            <h3 class="text-xl font-semibold text-gray-900 mb-1 dark:text-gray-200">${product.name}</h3>
                            ${starsHtml}
                            <p class="text-green-600 font-bold text-lg my-2">$${product.price.toFixed(2)}</p>
                        </div>
                    </div>
                    <button onclick="event.stopPropagation(); addToCart(${product.id})" class="w-full bg-green-500 text-white py-2 px-4 rounded-b-lg font-semibold hover:bg-green-600 transition-colors duration-300">
                        Add to Cart
                    </button>
                `;
                productGrid.appendChild(productCard);
            });
        }

        // Function to show a message (replaces alert())
        function showMessage(text) {
            messageText.textContent = text;
            messageBox.classList.remove('hidden', 'opacity-0');
            messageBox.classList.add('opacity-100');
            setTimeout(() => {
                messageBox.classList.remove('opacity-100');
                messageBox.classList.add('opacity-0');
                setTimeout(() => {
                    messageBox.classList.add('hidden');
                }, 300);
            }, 2000);
        }

        // Add to cart function
        function addToCart(productId) {
            const productToAdd = products.find(p => p.id === productId);
            if (productToAdd) {
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...productToAdd, quantity: 1 });
                }
                updateCartUI();
                showMessage(`Added ${productToAdd.name} to your cart!`);
            }
        }

        // Handle the checkout process
        function handleCheckout() {
            if (cart.length > 0) {
                // Simulate a successful checkout
                showMessage('Thank you for your purchase! Checkout successful.');
                // Clear the cart
                cart = [];
                // Update the UI to reflect the empty cart and close modal
                updateCartUI();
                hideCart();
            } else {
                showMessage('Your cart is empty. Please add items to check out.');
            }
        }

        // Hide cart modal
        function hideCart() {
            cartModal.classList.remove('modal-enter-active');
            cartModal.classList.add('modal-exit-active');
            setTimeout(() => {
                cartModal.classList.add('hidden');
            }, 300);
        }

        // Update cart UI (count, total, items)
        function updateCartUI() {
            let totalCount = 0;
            let total = 0;
            cartItemsContainer.innerHTML = ''; // Clear old items

            const checkoutButtonInCart = document.getElementById('checkoutButtonInCart');

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `<p class="text-center text-gray-500 dark:text-gray-400">Your cart is empty.</p>`;
                checkoutButtonInCart.disabled = true;
            } else {
                checkoutButtonInCart.disabled = false;
                cart.forEach(item => {
                    totalCount += item.quantity;
                    total += item.price * item.quantity;
                    const cartItemEl = document.createElement('div');
                    cartItemEl.className = 'flex items-center justify-between p-3 bg-gray-100 rounded-lg dark:bg-gray-700';
                    cartItemEl.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <img src="${item.image}" alt="${item.name}" class="w-12 h-12 rounded-md object-cover">
                            <div>
                                <h4 class="font-semibold dark:text-gray-200">${item.name}</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">$${item.price.toFixed(2)} x ${item.quantity}</p>
                            </div>
                        </div>
                        <span class="font-bold text-green-600">$${(item.price * item.quantity).toFixed(2)}</span>
                    `;
                    cartItemsContainer.appendChild(cartItemEl);
                });
            }

            cartCountElement.textContent = totalCount;
            cartTotalElement.textContent = `$${total.toFixed(2)}`;
        }

        // Update Shopping List UI
        function renderShoppingList() {
            listItemsContainer.innerHTML = '';
            if (shoppingList.length === 0) {
                listItemsContainer.innerHTML = `<p class="text-center text-gray-500 dark:text-gray-400">Your shopping list is empty.</p>`;
            } else {
                shoppingList.forEach((item, index) => {
                    const listItemEl = document.createElement('div');
                    listItemEl.className = 'flex items-center justify-between p-3 bg-gray-100 rounded-lg dark:bg-gray-700';
                    listItemEl.innerHTML = `
                        <span class="text-lg font-medium dark:text-gray-200">${item}</span>
                        <button onclick="removeListItem(${index})" class="text-red-500 hover:text-red-700 transition-colors duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    `;
                    listItemsContainer.appendChild(listItemEl);
                });
            }
        }

        // Add item to shopping list
        function addListItem() {
            const newItem = listItemInput.value.trim();
            if (newItem) {
                shoppingList.push(newItem);
                localStorage.setItem('shoppingList', JSON.stringify(shoppingList));
                listItemInput.value = '';
                renderShoppingList();
            }
        }

        // Remove item from shopping list
        function removeListItem(index) {
            shoppingList.splice(index, 1);
            localStorage.setItem('shoppingList', JSON.stringify(shoppingList));
            renderShoppingList();
        }

        // Add all list items to cart
        function addAllToListToCart() {
            if (shoppingList.length === 0) {
                showMessage("Your shopping list is empty!");
                return;
            }

            let addedCount = 0;
            const notFoundItems = [];

            shoppingList.forEach(item => {
                const product = products.find(p => p.name.toLowerCase() === item.toLowerCase());
                if (product) {
                    addToCart(product.id);
                    addedCount++;
                } else {
                    notFoundItems.push(item);
                }
            });

            if (addedCount > 0) {
                const message = `${addedCount} item(s) from your list were added to the cart!`;
                showMessage(message);
            }
            if (notFoundItems.length > 0) {
                const notFoundMessage = `Couldn't find the following items: ${notFoundItems.join(', ')}.`;
                showMessage(notFoundMessage);
            }
            
        }

        // Render recently viewed items
        function renderRecentlyViewed() {
            recentlyViewedContainer.innerHTML = '';
            if (recentlyViewed.length > 0) {
                 recentlyViewed.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'flex-shrink-0 w-48 bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-xl dark:bg-gray-700 cursor-pointer';
                    productCard.onclick = () => showQuickView(product.id);
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.name}" class="w-full h-32 object-cover object-center">
                        <div class="p-3 text-center">
                            <h4 class="text-md font-semibold text-gray-900 truncate dark:text-gray-200">${product.name}</h4>
                            <p class="text-green-600 font-bold text-sm mt-1">$${product.price.toFixed(2)}</p>
                        </div>
                    `;
                    recentlyViewedContainer.appendChild(productCard);
                });
            } else {
                recentlyViewedContainer.innerHTML = `<p class="text-center text-gray-500 w-full dark:text-gray-400">View a product to see it here.</p>`;
            }
        }

        // Track a product as recently viewed
        function trackViewedProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                // Remove if already in the list to move it to the front
                recentlyViewed = recentlyViewed.filter(item => item.id !== productId);
                // Add to the beginning of the array
                recentlyViewed.unshift(product);
                // Keep only the last 5 viewed items
                if (recentlyViewed.length > 5) {
                    recentlyViewed.pop();
                }
                localStorage.setItem('recentlyViewed', JSON.stringify(recentlyViewed));
                renderRecentlyViewed();
            }
        }

        // Show product quick view modal
        function showQuickView(productId) {
            trackViewedProduct(productId);
            const product = products.find(p => p.id === productId);
            if (product) {
                const starsHtml = getStars(product.rating);
                quickViewContent.innerHTML = `
                    <div class="flex justify-between items-center border-b pb-3 mb-4 border-gray-200 dark:border-gray-700">
                        <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200">${product.name}</h3>
                        <button id="closeQuickViewModal" class="text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6">
                        <div class="md:w-1/2">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-auto rounded-lg shadow-md object-cover">
                        </div>
                        <div class="md:w-1/2 flex flex-col justify-between">
                            <div>
                                <p class="text-lg text-gray-600 mb-2 dark:text-gray-400">${product.description}</p>
                                <div class="flex items-center mb-4">
                                    ${starsHtml}
                                    <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">(${product.rating} / 5)</span>
                                </div>
                                <p class="text-3xl font-bold text-green-600 mb-4">$${product.price.toFixed(2)}</p>
                            </div>
                            <button onclick="addToCart(${product.id}); hideQuickView()" class="w-full bg-green-500 text-white font-semibold py-3 px-4 rounded-full hover:bg-green-600 transition-colors duration-300">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                `;
                quickViewModal.classList.remove('hidden', 'modal-exit-active');
                quickViewModal.classList.add('modal-enter-active');

                // Add close event listener to the newly created button
                document.getElementById('closeQuickViewModal').addEventListener('click', hideQuickView);
            }
        }

        // Hide product quick view modal
        function hideQuickView() {
            quickViewModal.classList.remove('modal-enter-active');
            quickViewModal.classList.add('modal-exit-active');
            setTimeout(() => {
                quickViewModal.classList.add('hidden');
            }, 300);
        }

        // Toggle a product in the comparison list
        function toggleCompare(productId) {
            const index = comparisonList.indexOf(productId);
            if (index > -1) {
                comparisonList.splice(index, 1);
            } else {
                comparisonList.push(productId);
            }
            updateCompareButtonState();
            renderProducts(); // Rerender to update the checkbox state
        }

        // Update the state of the compare button
        function updateCompareButtonState() {
            compareButton.disabled = comparisonList.length < 2;
        }

        // Render the comparison modal
        function renderComparisonModal() {
            const productsToCompare = products.filter(p => comparisonList.includes(p.id));
            if (productsToCompare.length < 2) {
                showMessage("Please select at least two products to compare.");
                return;
            }

            let tableHtml = `
                <table class="compare-table">
                    <thead>
                        <tr>
                            <th class="w-32 md:w-40 text-left font-bold text-gray-800 dark:text-gray-200">Feature</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Images Row -->
                        <tr>
                            <td class="font-bold text-gray-800 dark:text-gray-200">Image</td>
                        </tr>
                        <!-- Names Row -->
                        <tr>
                            <td class="font-bold text-gray-800 dark:text-gray-200">Name</td>
                        </tr>
                        <!-- Prices Row -->
                        <tr>
                            <td class="font-bold text-gray-800 dark:text-gray-200">Price</td>
                        </tr>
                        <!-- Ratings Row -->
                        <tr>
                            <td class="font-bold text-gray-800 dark:text-gray-200">Rating</td>
                        </tr>
                        <!-- Descriptions Row -->
                        <tr>
                            <td class="font-bold text-gray-800 dark:text-gray-200">Description</td>
                        </tr>
                        <!-- Categories Row -->
                        <tr>
                            <td class="font-bold text-gray-800 dark:text-gray-200">Category</td>
                        </tr>
                    </tbody>
                </table>
            `;

            // Insert product data into the table
            productsToCompare.forEach(product => {
                const starsHtml = getStars(product.rating);
                tableHtml = tableHtml.replace('</thead>', `
                    <th class="text-center font-bold text-gray-800 dark:text-gray-200">${product.name}</th>
                    </thead>
                `).replace('<!-- Images Row -->', `
                    <td class="text-center"><img src="${product.image}" alt="${product.name}" class="w-full h-auto rounded-lg mx-auto"></td>
                    <!-- Images Row -->
                `).replace('<!-- Names Row -->', `
                    <td class="text-center font-semibold text-gray-900 dark:text-gray-200">${product.name}</td>
                    <!-- Names Row -->
                `).replace('<!-- Prices Row -->', `
                    <td class="text-center font-bold text-green-600">$${product.price.toFixed(2)}</td>
                    <!-- Prices Row -->
                `).replace('<!-- Ratings Row -->', `
                    <td class="text-center">
                        <div class="flex justify-center">${starsHtml}</div>
                    </td>
                    <!-- Ratings Row -->
                `).replace('<!-- Descriptions Row -->', `
                    <td class="text-left text-gray-600 dark:text-gray-400">${product.description}</td>
                    <!-- Descriptions Row -->
                `).replace('<!-- Categories Row -->', `
                    <td class="text-center text-gray-600 dark:text-gray-400">${product.category}</td>
                    <!-- Categories Row -->
                `);
            });

            compareContent.innerHTML = tableHtml;
            compareModal.classList.remove('hidden', 'modal-exit-active');
            compareModal.classList.add('modal-enter-active');
        }

        // Hide the comparison modal
        function hideComparisonModal() {
            compareModal.classList.remove('modal-enter-active');
            compareModal.classList.add('modal-exit-active');
            setTimeout(() => {
                compareModal.classList.add('hidden');
            }, 300);
        }

        // Render recipes based on cart items
        function renderRecipes() {
            recipeContent.innerHTML = '';
            const cartProductNames = cart.map(item => item.name);
            const matchingRecipes = recipes.filter(recipe => {
                const required = recipe.requiredIngredients;
                return required.every(ingredient => cartProductNames.includes(ingredient));
            });

            if (matchingRecipes.length === 0) {
                recipeContent.innerHTML = `<p class="text-center text-gray-500 dark:text-gray-400">Add more items to your cart to find recipe ideas!</p>`;
            } else {
                matchingRecipes.forEach(recipe => {
                    const recipeCard = document.createElement('div');
                    recipeCard.className = 'bg-gray-100 rounded-lg p-4 shadow-sm dark:bg-gray-700';
                    recipeCard.innerHTML = `
                        <h4 class="text-xl font-bold text-gray-800 mb-1 dark:text-gray-200">${recipe.name}</h4>
                        <p class="text-sm text-gray-600 mb-2 dark:text-gray-400">${recipe.description}</p>
                        <p class="font-semibold text-gray-700 dark:text-gray-300">You have:</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 dark:text-gray-400">
                            ${recipe.requiredIngredients.map(ing => `<li>${ing}</li>`).join('')}
                        </ul>
                    `;
                    recipeContent.appendChild(recipeCard);
                });
            }
            recipeModal.classList.remove('hidden', 'modal-exit-active');
            recipeModal.classList.add('modal-enter-active');
        }

        // Hide recipe modal
        function hideRecipeModal() {
            recipeModal.classList.remove('modal-enter-active');
            recipeModal.classList.add('modal-exit-active');
            setTimeout(() => {
                recipeModal.classList.add('hidden');
            }, 300);
        }

        // Rotate trivia facts
        let currentFactIndex = 0;
        function rotateTrivia() {
            currentFactIndex = (currentFactIndex + 1) % foodFacts.length;
            triviaBanner.textContent = foodFacts[currentFactIndex];
        }

        // Event listeners for filters and search
        searchInput.addEventListener('input', renderProducts);
        categoryFilter.addEventListener('change', renderProducts);
        sortOrder.addEventListener('change', renderProducts);
        filterButton.addEventListener('click', renderProducts);
        organicFilter.addEventListener('change', renderProducts);
        veganFilter.addEventListener('change', renderProducts);
        glutenFreeFilter.addEventListener('change', renderProducts);

        // Open and close cart modal
        cartButton.addEventListener('click', () => {
            cartModal.classList.remove('hidden', 'modal-exit-active');
            cartModal.classList.add('modal-enter-active');
        });

        closeCartModal.addEventListener('click', hideCart);
        checkoutButtonInCart.addEventListener('click', handleCheckout);

        // Open and close shopping list modal
        shoppingListButton.addEventListener('click', () => {
            renderShoppingList();
            listModal.classList.remove('hidden', 'modal-exit-active');
            listModal.classList.add('modal-enter-active');
        });

        closeListModal.addEventListener('click', () => {
            listModal.classList.remove('modal-enter-active');
            listModal.classList.add('modal-exit-active');
            setTimeout(() => {
                listModal.classList.add('hidden');
            }, 300);
        });

        addListItemButton.addEventListener('click', addListItem);
        listItemInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addListItem();
            }
        });
        addAllToListToCartButton.addEventListener('click', addAllToListToCart);

        // Open and close comparison modal
        compareButton.addEventListener('click', renderComparisonModal);
        closeCompareModal.addEventListener('click', hideComparisonModal);

        // Open and close recipe modal
        recipeButton.addEventListener('click', renderRecipes);
        closeRecipeModal.addEventListener('click', hideRecipeModal);

        // Dark mode toggle
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark');
        });

        // Initial rendering
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            updateCartUI();
            renderRecentlyViewed();
            setInterval(rotateTrivia, 5000); // Rotate trivia fact every 5 seconds
        });

    </script>
</body>
</html>
